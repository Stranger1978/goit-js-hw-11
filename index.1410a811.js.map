{"mappings":"AAAA,MAAMA,EACQ,2BADRA,EAEO,qCAFPA,EAGU,QAHVA,EAIW,aAJXA,EAKU,OCFhB,MAAMC,EAAO,CACbC,WAAYC,SAASC,cAAc,gBACnCC,aAAcF,SAASC,cAAc,YACrCE,YAAaH,SAASC,cAAc,eAGpCH,EAAKK,YAAYC,UAAUC,IAAI,aAC/B,MAAMC,EAAkB,IDGT,MAQXC,gBACI,OAAOC,MAAM,GAAGX,SAAqBA,OAAkBY,KAAKC,yBAAyBb,iBAA+BA,gBAA+BA,UAAwBY,KAAKE,iBAAiBF,KAAKG,YACrMC,MAAKC,IACN,IAAKA,EAASC,GACV,MAAM,IAAIC,MAAMF,EAASG,QAE7B,OAAOH,EAASI,MAAM,IAEjBL,MAAKM,IACFV,KAAKW,WAAaD,EAAKE,UACvBZ,KAAKE,MAAQ,EACNQ,EAAKG,QAGnBC,MAAMC,QAAQC,K,CAGnBC,YACIjB,KAAKW,WAAa,EAClBX,KAAKE,KAAO,C,CAEZgB,YACJ,OAAOlB,KAAKC,U,CAGRiB,UAAMC,GACVnB,KAAKC,WAAakB,C,CAjClBC,cACIpB,KAAKC,WAAa,GAClBD,KAAKE,KAAO,EACZF,KAAKG,SAAW,GAChBH,KAAKW,WAAa,C,GC0B1B,SAASU,EAAmBR,GACxB,MAAMS,EAAaT,EAAKU,KACtB,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEO,0CACAL,0CACqBD,WAAsBE,sHAKhDC,6EAIAC,gFAIAC,iFAIAC,2CAMLC,KAAK,IACN1C,EAAKI,aAAauC,mBAAmB,YAAaV,E,CArEtDjC,EAAKC,WAAW2C,iBAAiB,UAKjC,SAAkBC,GAKd,GAJAA,EAAIC,iBAsBR,WACI9C,EAAKI,aAAa2C,UAAY,E,CAtB9BC,GACAhD,EAAKK,YAAYC,UAAUC,IAAI,aAC/BC,EAAgBqB,MAAQgB,EAAII,cAAcC,SAASC,YAAYC,MACjC,KAA1B5C,EAAgBqB,MAChB,OAAOwB,MAAM,4BAEjB7C,EAAgBoB,YAChBpB,EAAgBC,gBAAgBM,MAAKS,IACjCE,QAAQ4B,IAAI9C,GACZwB,EAAmBR,GACfhB,EAAgBM,SAASN,EAAgBc,YAC9CtB,EAAKK,YAAYC,UAAUiD,OAAO,YAAY,G,IAjBrDvD,EAAKK,YAAYuC,iBAAiB,SAuBlC,WACIpC,EAAgBC,gBAAgBM,KAAKiB,E","sources":["src/api-search-image.js","src/index.js"],"sourcesContent":["const refs = {\n    MAIN_URL: 'https://pixabay.com/api/',\n    API_KEY: '37838198-1a117cc0732e6b102a4c5cb6d',\n    IMAGE_TYPE: 'photo',\n    ORIENTATION: 'horizontal',\n    SAFESEARCH: 'true',\n};\n\n//const PAGINATION_CONFIG = {\n    //page: 1,\n    //per_page: 40,\n//};\n\nexport default class ImageApiService { \n    constructor() { \n        this.queryValue = '';\n        this.page = 1;\n        this.per_page = 40;\n        this.total_hits = 0;\n    }\n\n    fetchArticles() { \n        return fetch(`${refs.MAIN_URL}?key=${refs.API_KEY}&q=${this.queryValue}&image_type=${refs.IMAGE_TYPE}&orientation=${refs.ORIENTATION}&safesearch=${refs.SAFESEARCH}&page=${this.page}&per_page=${this.per_page}`)\n        .then(response => { \n        if (!response.ok) { \n            throw new Error(response.status);\n        }\n        return response.json();\n        })\n            .then(data => {\n                this.total_hits = data.totalHits;\n                this.page += 1;\n                return data.hits;\n            }\n                )\n        .catch(console.warn);\n    }\n\n    resetPage() {\n        this.total_hits = 0;\n        this.page = 1;\n    }\n    get query() { \n    return this.queryValue;\n    }\n\n    set query(newQuery) { \n    this.queryValue = newQuery;\n    }\n}\n\n","import './css/index.css';\nimport ImageApiService from \"./api-search-image\";\n\nconst refs = {\nsearchForm: document.querySelector('.search-form'),\nphotoGallery: document.querySelector('.gallery'),\nloadMoreBtn: document.querySelector('.load-more'),\n}\n\nrefs.loadMoreBtn.classList.add(\"is-hidden\");\nconst imageApiService = new ImageApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\n\n\nfunction onSearch(evt) {\n    evt.preventDefault();\n    clearImageGallery();\n    refs.loadMoreBtn.classList.add(\"is-hidden\");\n    imageApiService.query = evt.currentTarget.elements.searchQuery.value;\n    if (imageApiService.query === '') {\n        return alert('Please enter valid data!')\n    }\n    imageApiService.resetPage();\n    imageApiService.fetchArticles().then(hits => { \n        console.log(imageApiService);\n        createImageGallery(hits);\n        if (imageApiService.per_page<imageApiService.total_hits) {\n       refs.loadMoreBtn.classList.remove(\"is-hidden\");     \n        }\n    });\n    \n};\n\nfunction onLoadMore() { \n    imageApiService.fetchArticles().then(createImageGallery);\n}\n\nfunction clearImageGallery() { \n    refs.photoGallery.innerHTML = '';\n}\n\nfunction createImageGallery(hits) {\n    const createCard = hits.map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<div class=\"photo-card\">\n    <a href=\"${largeImageURL}\">\n      <img class=\"photo-img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n    </a>\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b>\n        ${likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b>\n        ${views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b>\n        ${comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b>\n        ${downloads} \n      </p>\n    </div>\n    </div>`;\n      }\n    )\n    .join(''); \n    refs.photoGallery.insertAdjacentHTML('beforeend', createCard);\n}"],"names":["$5807e886b8a3aa42$var$refs","$1f0dc3b9307be026$var$refs","searchForm","document","querySelector","photoGallery","loadMoreBtn","classList","add","$1f0dc3b9307be026$var$imageApiService","fetchArticles","fetch","this","queryValue","page","per_page","then","response","ok","Error","status","json","data","total_hits","totalHits","hits","catch","console","warn","resetPage","query","newQuery","constructor","$1f0dc3b9307be026$var$createImageGallery","createCard","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","addEventListener","evt","preventDefault","innerHTML","$1f0dc3b9307be026$var$clearImageGallery","currentTarget","elements","searchQuery","value","alert","log","remove"],"version":3,"file":"index.1410a811.js.map"}